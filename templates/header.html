{% load static %}
{% load i18n %}
{% block content %}

<header class="header">
  <div class="container">
    <div class="header__inner">
      <a href="{% url 'home' %}" class="header-logo">{{ company_info.name }}</a>
      <nav class="header-menu">
        <a href="{% url 'home' %}">{% trans "Главная" %}</a>
        <a href="{% url 'products' %}">{% trans "Товары" %}</a>
        <a href="{% url 'contacts' %}">{% trans "Контакты" %}</a>
      </nav>
      <div class="header-info">
        <a href="tel:{{ company_info.phone_number }}"><i class="bi bi-telephone"></i>{{ company_info.phone_number }}</a>
        <a href="mailto:{{ company_info.email }}"><i class="bi bi-envelope"></i>{{ company_info.email }}</a>
      </div>
      <div class="language-switcher">
        <a href="#" onclick="changeLanguage('ru')"{% if LANGUAGE_CODE == 'ru' %} class="active"{% endif %}>{% trans "Русский" %}</a> |
        <a href="#" onclick="changeLanguage('lv')"{% if LANGUAGE_CODE == 'lv' %} class="active"{% endif %}>{% trans "Latviešu" %}</a>
      </div>
      <i onclick="openMenu()" class="bi bi-list mobileMenuOpener"></i>
      <div class="mobile">
        <i onclick="closeMenu()" class="bi bi-x-lg close"></i>
        <h3>{{ company_info.name }}</h3>
        <nav class="header-menu">
          <a href="{% url 'home' %}">{% trans "Главная" %}</a>
          <a href="{% url 'products' %}">{% trans "Товары" %}</a>
          <a href="{% url 'contacts' %}">{% trans "Контакты" %}</a>
        </nav>
        <div class="header-info">
          <a href="tel:{{ company_info.phone_number }}"><i class="bi bi-telephone"></i>{{ company_info.phone_number }}</a>
          <a href="mailto:{{ company_info.email }}"><i class="bi bi-envelope"></i>{{ company_info.email }}</a>
        </div>
        <div class="language-switcher">
          <a href="#" onclick="changeLanguage('ru')"{% if LANGUAGE_CODE == 'ru' %} class="active"{% endif %}>{% trans "Русский" %}</a> |
          <a href="#" onclick="changeLanguage('lv')"{% if LANGUAGE_CODE == 'lv' %} class="active"{% endif %}>{% trans "Latviešu" %}</a>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  function changeLanguage(lang) {
    var currentUrl = window.location.href;
    var newUrl = currentUrl.replace(/\/(ru|lv)\//, '/' + lang + '/');
  
    if (!newUrl.match(/\/(ru|lv)\//)) {
      newUrl = currentUrl + (currentUrl.endsWith('/') ? '' : '/') + lang + '/';
    }
  
    window.location.href = newUrl;
  }
  
</script>

{% endblock content %}
